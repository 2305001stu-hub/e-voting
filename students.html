<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Voting</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: url('https://images.unsplash.com/photo-1524069290683-0457abfe42c3?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8c2Nob29sJTIwc3R1ZGVudHN8ZW58MHx8MHx8fDA%3D') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
      min-height: 100vh;
    }
    .navbar {
      background: rgba(0,0,0,0.7);
      padding: 15px;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }
    .navbar h1 {
      margin: 0;
      font-size: 28px;
      color: #ffcc00;
    }
    .container {
      background: rgba(0,0,0,0.6);
      padding: 30px;
      border-radius: 15px;
      width: 80%;
      max-width: 800px;
      margin: 30px auto;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
    }
    .buttons {
      text-align: center;
      margin: 20px 0;
    }
    .buttons a {
      text-decoration: none;
      background: #ffffffcc;
      color: black;
      padding: 12px 25px;
      margin: 10px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      transition: 0.3s;
      display: inline-block;
    }
    .buttons a:hover {
      background: #ffcc00;
      color: black;
      transform: translateY(-2px);
    }
    h2 {
      color: #ffcc00;
      margin-top: 0;
      text-align: center;
    }
    ul {
      list-style-type: square;
      margin-left: 20px;
      line-height: 1.8;
    }
    .voting-form {
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 10px;
      margin: 20px 0;
    }
    .candidate-option {
      display: block;
      margin: 15px 0;
      padding: 10px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 5px;
      transition: background 0.3s;
    }
    .candidate-option:hover {
      background: rgba(255, 255, 255, 0.2);
    }
    .candidate-option input {
      margin-right: 10px;
    }
    button[type="submit"] {
      background: #ffcc00;
      color: black;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
      display: block;
      margin: 20px auto;
      width: 200px;
    }
    button[type="submit"]:hover {
      background: #ffd633;
      transform: translateY(-2px);
    }
    .back-link {
      display: inline-block;
      text-decoration: none;
      color: #ffcc00;
      margin-top: 20px;
      padding: 8px 15px;
      border: 1px solid #ffcc00;
      border-radius: 5px;
      transition: 0.3s;
    }
    .back-link:hover {
      background: #ffcc00;
      color: black;
    }
    .message {
      padding: 10px;
      margin: 10px 0;
      border-radius: 5px;
      text-align: center;
    }
    .success {
      background: rgba(0, 255, 0, 0.2);
      border: 1px solid rgba(0, 255, 0, 0.5);
      color: #4CAF50;
    }
    .error {
      background: rgba(255, 0, 0, 0.2);
      border: 1px solid rgba(255, 0, 0, 0.5);
      color: #f44336;
    }
    .info {
      background: rgba(33, 150, 243, 0.2);
      border: 1px solid rgba(33, 150, 243, 0.5);
      color: #2196F3;
    }
    .voter-id-input {
      margin-bottom: 20px;
    }
    .voter-id-input label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #ffcc00;
    }
    .voter-id-input input {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.9);
    }
    @media (max-width: 600px) {
      .container {
        width: 95%;
        padding: 15px;
      }
      .buttons a {
        display: block;
        margin: 10px auto;
        width: 80%;
      }
    }
  </style>
</head>
<body>
  <div class="navbar">
    <h1>Student Voting System</h1>
  </div>
  
  <div class="container">
    <h2>Vote for a Candidate</h2>
    
    <!-- Message display area -->
    <div id="message" class="message" style="display: none;"></div>
    
    <div class="voting-form">
      <form id="votingForm">
        <!-- Voter ID Input -->
        <div class="voter-id-input">
          <label for="voterId">Student ID</label>
          <input type="text" id="voterId" name="voterId" placeholder="Enter your student ID" required>
        </div>
        
        <!-- Candidates will be loaded here -->
        <div id="candidatesList"></div>
        
        <button type="submit">Submit Vote</button>
      </form>
    </div>
    
    <div class="buttons">
      <a href="index.html">Back to Home</a>
      <a href="results.html">View Results</a>
      <a href="about.html">About the Election</a>
    </div>
  </div>

  <script>
    // Sample candidate data (in a real app, this would come from an API or database)
    const candidates = [
      { id: 1, name: "John Smith", position: "Class President" },
      { id: 2, name: "Sarah Johnson", position: "Class President" },
      { id: 3, name: "Michael Brown", position: "Class President" },
      { id: 4, name: "Emily Davis", position: "Class President" }
    ];

    // Track voted students (in a real app, this would be stored in a database)
    const votedStudents = JSON.parse(localStorage.getItem('votedStudents') || '[]');
    const voteCounts = JSON.parse(localStorage.getItem('voteCounts') || '{}');

    // DOM elements
    const messageDiv = document.getElementById('message');
    const candidatesList = document.getElementById('candidatesList');
    const votingForm = document.getElementById('votingForm');
    const voterIdInput = document.getElementById('voterId');

    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
      displayCandidates();
      
      // Check for URL parameters (for messages)
      const urlParams = new URLSearchParams(window.location.search);
      const message = urlParams.get('message');
      const success = urlParams.get('success');
      
      if (message) {
        showMessage(message, success === 'true' ? 'success' : 'error');
      }
    });

    // Display candidates in the form
    function displayCandidates() {
      candidatesList.innerHTML = '';
      
      if (candidates.length === 0) {
        candidatesList.innerHTML = '<p>No candidates available for voting at this time.</p>';
        return;
      }
      
      candidates.forEach(candidate => {
        const candidateOption = document.createElement('label');
        candidateOption.className = 'candidate-option';
        candidateOption.innerHTML = `
          <input type="radio" name="vote" value="${candidate.id}" required>
          ${candidate.name} - ${candidate.position}
        `;
        candidatesList.appendChild(candidateOption);
      });
    }

    // Handle form submission
    votingForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const voterId = voterIdInput.value.trim();
      const selectedCandidate = document.querySelector('input[name="vote"]:checked');
      
      // Validation
      if (!voterId) {
        showMessage('Please enter your student ID.', 'error');
        return;
      }
      
      if (!selectedCandidate) {
        showMessage('Please select a candidate to vote for.', 'error');
        return;
      }
      
      // Check if student has already voted
      if (votedStudents.includes(voterId)) {
        showMessage('You have already voted. Each student can only vote once.', 'error');
        return;
      }
      
      // Process the vote
      const candidateId = selectedCandidate.value;
      const candidate = candidates.find(c => c.id == candidateId);
      
      if (candidate) {
        // Record the vote
        votedStudents.push(voterId);
        localStorage.setItem('votedStudents', JSON.stringify(votedStudents));
        
        // Update vote counts
        if (!voteCounts[candidateId]) {
          voteCounts[candidateId] = 0;
        }
        voteCounts[candidateId]++;
        localStorage.setItem('voteCounts', JSON.stringify(voteCounts));
        
        // Show success message
        showMessage(`Thank you for voting! Your vote for ${candidate.name} has been recorded.`, 'success');
        
       
        votingForm.reset();
        
  
        setTimeout(() => {
          window.location.href = 'results.html';
        }, 3000);
      } else {
        showMessage('Error processing your vote. Please try again.', 'error');
      }
    });

    // Function to show messages
    function showMessage(text, type) {
      messageDiv.textContent = text;
      messageDiv.className = `message ${type}`;
      messageDiv.style.display = 'block';
      
      // Hide message after 5 seconds (except for success messages with redirect)
      if (type !== 'success') {
        setTimeout(() => {
          messageDiv.style.display = 'none';
        }, 5000);
      }
    }


    function simulateAzureBlobIntegration() {
 
      console.log('Simulating Azure Blob Storage integration...');
      
    
    }
  </script>
</body>
</html>
